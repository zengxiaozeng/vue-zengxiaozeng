webpackJsonp([9],{QsZ0:function(t,e){},XAP7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("4YfN"),n=s.n(r),i=s("9rMa"),o={data:function(){return{isLoading:!1,isPress:!1,isOver:!1,barTop:0}},watch:{token:function(){this.getRecords()},records:function(t,e){this.calcScrollBar(e,t)}},created:function(){this.getRecords(),this.$refs.bar.style.top=0},mounted:function(){this.barTop=0},computed:n()({},Object(i.d)("DrawCash",{records:function(t){return t.records},isEnded:function(t){return t.isEnded}}),Object(i.d)({token:function(t){return t.token}})),methods:n()({},Object(i.b)("DrawCash",{getRecords:"getRecords",clearRecords:"clearRecords"}),{calcScrollBar:function(t,e){var s=this.$refs.list.offsetHeight;70*this.records.length<s||(this.isOver=!0,0==t.length?this.barTop=0:this.barTop=(document.body.offsetHeight-340)*t.length/e.length)},scroll:function(t){var e=t.target.scrollHeight-(document.body.offsetHeight-150),s=t.target.scrollTop;this.barTop=(document.body.offsetHeight-260)*s/e,e-s<=0&&this.getMore()},getMore:function(t){var e=this;this.isLoading||this.isEnded||(this.isLoading=!0,setTimeout(function(){e.getRecords(function(){setTimeout(function(){e.isLoading=!1},100)})},1e3))}}),filters:{formatStamp:function(t){return new Date(t).getFullYear()+"-"+("0"+String(new Date(t).getMonth()+1)).slice(-2)+"-"+("0"+String(new Date(t).getDate())).slice(-2)+" "+("0"+String(new Date(t).getHours())).slice(-2)+":"+("0"+String(new Date(t).getMinutes())).slice(-2)+":"+("0"+String(new Date(t).getSeconds())).slice(-2)}},destroyed:function(){this.barTop=0,this.isLoading=!1,this.isPress=!1,this.isOver=!1,this.clearRecords()},beforeEnter:function(t,e,s){this.barTop=0}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-draw-record"},[t._m(0),s("div",{ref:"container",on:{scroll:t.scroll,touchstart:function(e){t.isPress=!0},touchend:function(e){t.isPress=!1},touchmove:function(e){t.isPress=!0}}},[s("transition",{attrs:{name:"fade"}},[t.isOver?s("aside",{class:{press:t.isPress}},[s("span",{ref:"bar",staticClass:"bar",style:{top:t.barTop+"px"}})]):t._e()]),s("ul",{ref:"list"},t._l(t.records,function(e,r){return s("li",{key:r},[s("span",[t._v(t._s(e.awardName))]),s("span",[t._v(t._s(t._f("formatStamp")(e.insertTime)))])])})),t.records.length>20&&t.isEnded?s("p",[t._v("已经到底了~")]):t._e(),t.isLoading?s("p",[t._v("正在加载中...")]):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[e("img",{attrs:{src:"https://image.youdingkeji.com/H5/activitys/20180715CBX_FETE/drawCash/record_title.png"}})])}]};var a=s("Z0/y")(o,c,!1,function(t){s("QsZ0")},null,null);e.default=a.exports}});